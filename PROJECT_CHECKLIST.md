# AI-SAJU 프로젝트 완성도 체크리스트

> 최종 업데이트: 2026-01-16
> 목적: 프로젝트 전체 점검 및 완성도 향상

---

## 목차
1. [핵심 기능 (Critical)](#1-핵심-기능-critical)
2. [유료 서비스 (Revenue)](#2-유료-서비스-revenue)
3. [인증/보안 (Auth/Security)](#3-인증보안-authsecurity)
4. [페이지별 점검](#4-페이지별-점검)
5. [API 상태](#5-api-상태)
6. [환경변수 필수 설정](#6-환경변수-필수-설정)
7. [Supabase 테이블](#7-supabase-테이블)
8. [개선 필요 사항](#8-개선-필요-사항)
9. [제거 또는 비활성화 권장](#9-제거-또는-비활성화-권장)

---

## 1. 핵심 기능 (Critical)

### 사주 분석 (메인 서비스)
| 기능 | 상태 | 우선순위 | 비고 |
|------|------|----------|------|
| 기본 정보 입력 폼 | ✅ 완료 | P0 | 년/월/일 분리 입력, 자동 포커스 |
| 무료 분석 | ✅ 완료 | P0 | AI 분석 결과 생성 |
| 프로필 저장/불러오기 | ✅ 완료 | P1 | 최대 20개, 즐겨찾기 기능 |
| 프리미엄 분석 | ⚠️ 점검필요 | P0 | 버튼 클릭 시 반응 없음 이슈 |
| 결과 PDF 다운로드 | ⚠️ 점검필요 | P1 | 기능 확인 필요 |
| 다자간 궁합 분석 | ⚠️ 점검필요 | P2 | 2~5인 분석 |

### 포인트 시스템
| 기능 | 상태 | 우선순위 | 비고 |
|------|------|----------|------|
| 포인트 조회 | ✅ 완료 | P0 | GET /api/points |
| 포인트 차감 | ✅ 완료 | P0 | POST /api/points |
| 포인트 충전 | ⚠️ 점검필요 | P1 | PUT /api/points |
| 관리자 무료 이용 | ✅ 완료 | P1 | mymiryu@gmail.com, mymiryu@naver.com |

---

## 2. 유료 서비스 (Revenue)

### 결제 시스템
| 기능 | 상태 | 우선순위 | 비고 |
|------|------|----------|------|
| Toss Payments 연동 | ⚠️ 점검필요 | P0 | /api/payment/* |
| 결제 성공 처리 | ⚠️ 점검필요 | P0 | /api/payment/toss/success |
| 결제 실패 처리 | ⚠️ 점검필요 | P1 | /api/payment/toss/fail |
| 웹훅 처리 | ⚠️ 점검필요 | P1 | /api/payment/webhook |

### 포인트 패키지
| 패키지 | 포인트 | 보너스 | 가격 |
|--------|--------|--------|------|
| 스타터 | 500P | 0% | ₩5,000 |
| 기본 | 1,000P | 10% | ₩10,000 |
| 스탠다드 | 3,000P | 20% | ₩30,000 |
| 프리미엄 | 5,000P | 30% | ₩50,000 |
| VIP | 10,000P | 50% | ₩100,000 |

### 분석 상품 가격
| 상품 | 포인트 | 기능 |
|------|--------|------|
| 기본 분석 | 500P | 성격, 2026년 운세, 월별 액션플랜, PDF |
| 심층 분석 | 1,000P | 기본 + 대운, 10년 예측, 월별 상세 |
| 프리미엄 분석 | 2,000P | 심층 + 타임라인, 가족영향, 골든윈도우 |
| 그룹 궁합 | 1,500P | 2~5인 궁합 분석 |
| VIP 종합 | 5,000P | 전체 + 전문가 상담 1회 |

---

## 3. 인증/보안 (Auth/Security)

### 로그인 방식
| 방식 | 상태 | 비고 |
|------|------|------|
| 이메일/비밀번호 | ✅ 완료 | Supabase Auth |
| Google OAuth | ✅ 완료 | Supabase 설정 필요 |
| Kakao OAuth | ❌ 오류 | Supabase 대시보드에서 활성화 필요 |
| Apple OAuth | ⚠️ 미확인 | 테스트 필요 |

### Supabase 설정 필요
1. Authentication > Providers > Kakao 활성화
2. Kakao Developers에서 앱 등록 및 키 발급
3. Redirect URL 설정: `https://[project].supabase.co/auth/v1/callback`

---

## 4. 페이지별 점검

### 메인 페이지 (/ko)
| 항목 | 상태 | 비고 |
|------|------|------|
| 히어로 섹션 | ✅ | |
| 기능 소개 | ⚠️ 점검필요 | |
| CTA 버튼 | ✅ | |

### 사주 분석 (/fortune/saju)
| 항목 | 상태 | 비고 |
|------|------|------|
| 입력 폼 | ✅ 완료 | 4단계 마법사 |
| 분석 로딩 | ✅ 완료 | 프로그레스 바 |
| 결과 표시 | ✅ 완료 | |
| 프로필 저장 | ✅ 완료 | 모달 UX 개선 완료 |
| 프로필 불러오기 | ✅ 완료 | |
| 프리미엄 업그레이드 | ⚠️ 오류 | 클릭 시 반응 없음 |

### 로또 (/lotto)
| 항목 | 상태 | 비고 |
|------|------|------|
| 번호 생성 | ⚠️ 점검필요 | |
| 당첨 통계 | ⚠️ 점검필요 | |
| 필터링 | ⚠️ 점검필요 | |

### 마이페이지 (/my/*)
| 페이지 | 상태 | 비고 |
|--------|------|------|
| 대시보드 | ⚠️ 점검필요 | |
| 분석 기록 | ⚠️ 점검필요 | |
| 가족 관리 | ⚠️ 점검필요 | |
| 추천인 | ⚠️ 점검필요 | |
| 설정 | ⚠️ 점검필요 | |

### 기타 페이지
| 페이지 | 상태 | 우선순위 |
|--------|------|----------|
| 가격 안내 (/pricing) | ⚠️ 점검필요 | P1 |
| 궁합 분석 (/fortune/compatibility) | ⚠️ 점검필요 | P2 |
| 관상 분석 (/fortune/face) | ⚠️ 점검필요 | P3 |
| 전문가 상담 (/fortune/experts) | ⚠️ 점검필요 | P3 |
| 커뮤니티 (/community) | ⚠️ 점검필요 | P3 |
| 마켓플레이스 (/marketplace) | ⚠️ 점검필요 | P3 |
| AI 랭킹 (/ranking) | ⚠️ 점검필요 | P3 |

---

## 5. API 상태

### 핵심 API (반드시 작동해야 함)
| API | 상태 | 비고 |
|-----|------|------|
| POST /api/fortune/saju/analyze | ✅ | 사주 분석 |
| POST /api/fortune/saju/premium | ⚠️ 점검필요 | 프리미엄 분석 |
| GET /api/points | ✅ | 포인트 조회 |
| POST /api/points | ✅ | 포인트 차감 |
| GET /api/saju-profiles | ✅ | 프로필 조회 |
| POST /api/saju-profiles | ✅ | 프로필 저장 |

### 부가 API
| API | 상태 | 비고 |
|-----|------|------|
| POST /api/fortune/saju/download | ⚠️ 점검필요 | PDF 다운로드 |
| POST /api/fortune/saju/group | ⚠️ 점검필요 | 그룹 분석 |
| POST /api/gift | ⚠️ 점검필요 | 선물하기 |
| POST /api/coupon | ⚠️ 점검필요 | 쿠폰 |
| POST /api/payment/create | ⚠️ 점검필요 | 결제 생성 |
| POST /api/checkin | ⚠️ 점검필요 | 출석 체크 |

---

## 6. 환경변수 필수 설정

### Vercel에 반드시 설정해야 하는 변수
```env
# Supabase (필수)
NEXT_PUBLIC_SUPABASE_URL=https://bnlrrlnjisokppslkmck.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# OpenAI (필수 - AI 분석용)
OPENAI_API_KEY=sk-...

# Toss Payments (결제용)
TOSS_CLIENT_KEY=...
TOSS_SECRET_KEY=...

# 기타
NEXT_PUBLIC_APP_URL=https://ai-planx.com
```

### 확인 방법
1. Vercel Dashboard > Settings > Environment Variables
2. 위 변수들이 모두 설정되어 있는지 확인

---

## 7. Supabase 테이블

### 필수 테이블
| 테이블 | 생성 여부 | 비고 |
|--------|----------|------|
| users | ✅ | 기본 스키마 |
| user_settings | ✅ | |
| fortune_analyses | ✅ | |
| saju_profiles | ✅ | 새로 추가됨 |
| payments | ✅ | |
| coin_transactions | ⚠️ 확인필요 | 포인트용 |

### SQL 실행 필요 시
```sql
-- saju_profiles 테이블 (이미 생성됨)
-- coin_transactions 테이블이 없으면 생성
```

---

## 8. 개선 필요 사항

### 긴급 (P0)
- [ ] **프리미엄 분석 버튼 작동 안함** - handlePurchase 함수 디버깅 필요
- [ ] **결제 시스템 테스트** - 실제 결제 플로우 테스트

### 높음 (P1)
- [ ] PDF 다운로드 기능 테스트
- [ ] 포인트 충전 플로우 완성
- [ ] 에러 메시지 사용자 친화적으로 개선
- [ ] 로딩 상태 UI 개선

### 보통 (P2)
- [ ] 그룹 궁합 분석 기능 완성
- [ ] 출석 체크 캘린더 기능 테스트
- [ ] 추천인 시스템 테스트
- [ ] 마이페이지 각 섹션 테스트

### 낮음 (P3)
- [ ] 관상 분석 기능 구현
- [ ] 전문가 상담 시스템 구현
- [ ] 커뮤니티 기능 구현
- [ ] 마켓플레이스 기능 구현

---

## 9. 제거 또는 비활성화 권장

### 미완성 기능 (임시 숨김 권장)
| 기능 | 위치 | 조치 |
|------|------|------|
| 관상 분석 | /fortune/face | 메뉴에서 임시 숨김 |
| 전문가 상담 | /fortune/experts | 메뉴에서 임시 숨김 |
| 커뮤니티 | /community | 메뉴에서 임시 숨김 |
| 마켓플레이스 | /marketplace | 메뉴에서 임시 숨김 |
| 프롬프트 | /prompts | 메뉴에서 임시 숨김 |
| eBook | /ebook | 메뉴에서 임시 숨김 |
| QR 코드 | /tools/qrcode | 메뉴에서 임시 숨김 |
| 요청 | /request | 메뉴에서 임시 숨김 |

### 숨김 방법
Header.tsx에서 해당 메뉴 항목을 주석 처리하거나 조건부 렌더링

---

## 10. 테스트 시나리오

### 비로그인 사용자
1. [ ] 메인 페이지 접근 가능
2. [ ] 사주 분석 입력 폼 사용 가능
3. [ ] 무료 분석 결과 확인 가능
4. [ ] 프리미엄 분석 시 로그인 유도

### 로그인 사용자 (일반)
1. [ ] 로그인/로그아웃 정상 작동
2. [ ] 프로필 저장/불러오기 가능
3. [ ] 포인트 조회 가능
4. [ ] 포인트 부족 시 안내 메시지

### 관리자 사용자
1. [ ] 관리자 배지 표시
2. [ ] 프리미엄 분석 무료 이용 가능
3. [ ] 포인트 차감 없이 진행

---

## 변경 이력

| 날짜 | 변경 내용 | 담당자 |
|------|----------|--------|
| 2026-01-16 | 초안 작성 | Claude |
| 2026-01-16 | 프로필 저장 기능 완료 | Claude |
| 2026-01-16 | 관리자 무료 이용 기능 추가 | Claude |

---

## 다음 단계

1. **즉시**: 프리미엄 분석 버튼 오류 수정
2. **단기**: 결제 시스템 테스트 및 안정화
3. **중기**: 미완성 페이지 정리 (숨김 처리)
4. **장기**: 추가 기능 구현 (관상, 전문가 등)
